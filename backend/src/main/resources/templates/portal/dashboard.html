<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Portal Dev Harness - Dashboard</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; max-width: 960px; margin: 40px auto; padding: 0 20px; color: #1a1a1a; }
        h1 { font-size: 1.5rem; margin-bottom: 0.25rem; }
        h2 { font-size: 1.125rem; margin-top: 2rem; margin-bottom: 0.5rem; }
        .subtitle { color: #666; font-size: 0.875rem; margin-bottom: 2rem; }
        .badge { display: inline-block; background: #fbbf24; color: #1a1a1a; padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .error { background: #fef2f2; border: 1px solid #fecaca; color: #dc2626; padding: 12px; border-radius: 4px; margin-bottom: 1rem; font-size: 0.875rem; }
        table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
        th { text-align: left; padding: 8px 12px; background: #f8fafc; border-bottom: 2px solid #e2e8f0; font-weight: 600; }
        td { padding: 8px 12px; border-bottom: 1px solid #e2e8f0; }
        a { color: #2563eb; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .empty { color: #999; font-style: italic; padding: 1rem 0; }
        .meta { color: #666; font-size: 0.75rem; }
        .nav { margin-bottom: 1rem; font-size: 0.875rem; }
    </style>
</head>
<body>
    <div class="nav">
        <a th:href="@{/portal/dev/generate-link}">Back to Generate Link</a>
    </div>

    <h1>Customer Dashboard <span class="badge">DEV ONLY</span></h1>
    <p class="subtitle">
        <span th:if="${orgId}">Org: <strong th:text="${orgId}">org_xxx</strong></span>
        <span th:if="${customerId}"> | Customer: <strong th:text="${customerId}">uuid</strong></span>
    </p>

    <div th:if="${error}" class="error" th:text="${error}">Error message</div>

    <h2>Projects</h2>
    <p th:if="${projects == null || projects.isEmpty()}" class="empty">No projects found.</p>
    <table th:if="${projects != null && !projects.isEmpty()}">
        <thead>
            <tr>
                <th>Name</th>
                <th>Status</th>
                <th>Documents</th>
                <th>Comments</th>
                <th>Created</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="project : ${projects}">
                <td>
                    <a th:href="@{/portal/dev/project/{id}(id=${project.id()}, token=${token})}"
                       th:text="${project.name()}">Project Name</a>
                </td>
                <td th:text="${project.status()}">Active</td>
                <td th:text="${project.documentCount()}">0</td>
                <td th:text="${project.commentCount()}">0</td>
                <td class="meta" th:text="${project.createdAt()}">2024-01-01</td>
            </tr>
        </tbody>
    </table>

    <h2>Documents</h2>
    <p th:if="${documents == null || documents.isEmpty()}" class="empty">No documents found.</p>
    <table th:if="${documents != null && !documents.isEmpty()}">
        <thead>
            <tr>
                <th>Title</th>
                <th>Type</th>
                <th>Size</th>
                <th>Uploaded</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="doc : ${documents}">
                <td th:text="${doc.title()}">Document Title</td>
                <td th:text="${doc.contentType()}">application/pdf</td>
                <td th:text="${doc.size()}">0</td>
                <td class="meta" th:text="${doc.uploadedAt()}">2024-01-01</td>
            </tr>
        </tbody>
    </table>
</body>
</html>
