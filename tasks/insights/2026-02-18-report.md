# Workflow Insight Report — 2026-02-18

**Session**: `a44e44b8-aa0b-41bc-a89e-2af85815b31f`
**Duration**: 18:10 → 19:37 UTC (1h 27m)
**Total Tool Calls**: 70 | **Errors**: 6 (8.57%)

## Summary

This was a **Phase 14 orchestration session** using `/phase_v2` (or similar). The orchestrator launched Epic 103A as a background agent, then spent ~85 minutes polling its progress via periodic `sleep` + status checks. The agent successfully built, tested, and merged PR #214 ("Compliance pack seeder & shipped packs"). The session ended by writing handoff notes to `tasks/todo.md` for the next agent to resume at 103B.

## What Went Well

- **Epic 103A shipped cleanly** — PR #214 merged with no manual intervention required
- **Good handoff discipline** — session ended with structured notes: completed slices table, remaining slice list, and resume command
- **Phase 14 progress**: 7 of 17 slices merged (100A–103A) across today's sessions
- **Zero build failures visible to orchestrator** — the builder agent handled all compilation and test cycles internally

## What Could Be Better

- **82.8% of tool calls were Bash** (58/70) — almost all were `sleep 600` + `ps`/`git status` polling loops. This is an expensive way to monitor a background agent
  - **Suggestion**: The `run_in_background: true` + `TaskOutput` pattern with `block: true` would eliminate all the sleep-poll cycles. One blocking call replaces ~40 sleep+check calls
  - **Suggestion**: If polling is necessary, use a single compound check script instead of 3-4 separate Bash calls per cycle (ps + git status + log tail + build check)

- **6 errors, all benign but noisy**:
  - 2x `Read` file-not-found (checking non-existent paths)
  - 2x `Exit code 2` from monitoring scripts (grep no-match)
  - 1x `Exit code 3` from a freshness-check script
  - 1x `Exit code 1` from a TaskOutput check
  - **Suggestion**: Monitoring scripts should use `|| true` to suppress expected non-zero exits, or the orchestrator should treat these exit codes as "no news" rather than errors

- **Context waste from duplicate polling**: Lines 19–64 show the same pattern repeated ~15 times: sleep → check pid → check git status → check logs. Each cycle consumed tokens re-reading the same status output
  - **Suggestion**: A single `while` loop bash script that writes to a status file, with the orchestrator only checking that file periodically, would halve context usage

## What Didn't Work

- **No actual failures** — this was a clean run. The "errors" were all monitoring script artifacts, not real problems.

## Stats

### Tool Usage
| Tool | Calls | Errors |
|------|-------|--------|
| Bash | 58 | 4 |
| Read | 6 | 2 |
| Write | 1 | 0 |
| Glob | 1 | 0 |
| **Total** | **70** | **6** |

### Session Timeline
| Phase | Time | Tool Calls | Activity |
|-------|------|------------|----------|
| Setup | 18:10–18:12 | 10 | Read task file, check state, launch 103A agent |
| Monitoring | 18:12–19:20 | 48 | 15 poll cycles (~5 min each) checking agent progress |
| Wrapup | 19:20–19:37 | 12 | Detect completion, verify PR #214, write handoff notes |

### Files Modified
| File | Action |
|------|--------|
| `tasks/todo.md` | Written — Phase 14 handoff notes (resume from 103B) |

### Phase 14 Slice Throughput (Today)
| Slice | PR | Time Window |
|-------|----|-------------|
| 100A | #208 | Earlier session |
| 100B | #209 | Earlier session |
| 101A | #210 | Earlier session |
| 101B | #211 | Earlier session |
| 102A | #212 | Earlier session |
| 102B | #213 | Earlier session |
| 103A | #214 | This session (~87 min wall clock) |

## Efficiency Analysis

**Token efficiency**: Low for an orchestration session. ~82% of tokens were spent on sleep-poll-read cycles that returned essentially the same information. A blocking `TaskOutput` call or a watcher script would reduce this session's tool calls from 70 to ~15.

**Wall-clock efficiency**: 87 minutes for one epic slice is within normal range for a backend-heavy slice with integration tests. The orchestrator's overhead was minimal in wall-clock terms — it was just waiting.

**Comparison to previous sessions**: Today had 16 stats files (heavy build day). The `1809-1f5cc0d1` session (3.5KB) and `1934-5efb9eae` session (6.0KB) were the most tool-heavy, suggesting multiple orchestrator sessions running phase slices sequentially.

## Recommendations

1. **Consolidate monitoring into a watcher script** — `scripts/watch-agent.sh <pid> <worktree>` that writes structured status to a file. Orchestrator reads the file once per cycle instead of running 4 commands.
2. **Use `|| true` in monitoring Bash calls** — suppress exit codes from `grep` no-match and `ps` not-found to eliminate false error signal.
3. **Consider `TaskOutput(block=true)`** — if the builder is launched via `Task(run_in_background=true)`, a single blocking `TaskOutput` call eliminates all polling entirely.

## Raw Data
- Stats: `tasks/insights/2026-02-18_1937-a44e44b8.stats.json`
- Event log: `.claude/logs/a44e44b8-aa0b-41bc-a89e-2af85815b31f.jsonl`
